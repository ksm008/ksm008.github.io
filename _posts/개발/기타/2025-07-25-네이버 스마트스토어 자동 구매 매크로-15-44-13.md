---
layout: post
title: 자바로 셀레니움을 사용해보자 (ft. 네이버 스마트스토어)
date: 2025-07-25 15:44:13 +0900
categories:
  - 개발
  - 기타
tags:
---
**해당 글은 다른 사람에게 가이드를 주기 위한 글이 아닌 일기 형식의 공부글이기 때문에 존댓말을 쓰지 않았습니다.**

최근 한 친구가 복숭아에 미쳐있다는 것을 알게 되었다. 그냥 미친 정도가 아니다. 개미친 또라이 복숭아 처돌이 그 자체다. 1년마다 복숭아를 사는데에만 3-400만원은 쓴다고 했으니 제정신이 아닌 놈이 확실하다. 

아무튼 이 친구가 복숭아를 구매하는 곳도 정말 여러 곳이였는데, 대부분 너무 유명해진 탓에 사람들이 몰려 금방 품절되는 곳들이였다. 매크로를 사볼 생각은 없냐고 물어봤지만 고민중이라고 하더라. 그래서 그냥 그럴바에는 생각을 바꿔보자고 했다.

> 안 살거면 직접 만들어보면 되는거 아님?

당장 해보자.

...근데 뭐 어떻게 하는거지? 셀레니움? XPATH? CSSSelector?

낯선 단어들이 나와서 조금 공부를 진행해야 했다. 요즘 간단한 코드들은 GPT에게 부탁하면 알아서 잘 짜주지만 내가 코드를 이해하지 못하면 어디서 에러가 발생했는지, 뭐가 문제인지 정확하게 알 수가 없다. GPT도 정확하게 에러가 어디서 유발되는지 찾아내지 못하는 경우가 많다.
- 스마트스토어 구매 버튼을 누르고 일반결제를 선택하도록 코드를 짜놓은 적이 있었다. 그런데 일반결제를 누를 때 에러가 떠서 그걸 GPT에게 물어보니 일반결제 요소를 찾지 못해 발생하는 문제라고 했다. 그러더니 어떻게든 그 요소를 누르려고 별 짓을 다하는 코드를 짜주었다. 정작 문제는 페이지 로딩이 느려서 애초에 요소가 로딩조차 되지 않았던 것이였다. 그래서 1초 정도 지연을 주거나, WebDriverWait으로 해결이 가능했다. GPT는 사람이 아니다보니 뭐가 문제인지 **코드만** 보고 알아내기 때문에 가끔 이런 기본적인 에러도 돌아가는 경우가 정말 많다. 

그래서 그냥 셀레니움을 어떻게 쓰는지부터 차근차근 공부했다. 

## 셀레니움 설치

언어는 자바, IDE는 IntelliJ를 사용했고 gradle에 셀레니움을 추가해 의존성 주입을 해주었다.

```gradle
dependencies {
	...
	implementation 'org.seleniumhq.selenium:selenium-java:4.14.0'
	...
}
```

## 셀레니움의 동작 단계
셀레니움의 동작 단계는 크게 3단계로 나뉜다.

 1. 웹드라이버 불러오기 (크롬드라이버)
 2. 웹요소를 찾아 불러오기
 3. 그 요소에 특정 메소드를 실행

```java
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.support.ui.WebDriverWait;

public class NaverSmartStore {  
    public static void main(String[] args) {  
        System.setProperty("webdriver.chrome.driver", "C:/chromedriver/chromedriver.exe");
        
        WebDriver driver = new ChromeDriver();  
		WebDriverWait wait = new WebDriverWait(driver, Duration.ofSeconds(10));
		...
    }
```


1. 웹 드라이버를 불러오기 전에 먼저 시스템 경로 설정을 먼저 해줘야 한다. 그리고 나서 크롬 드라이버 객체를 생성해주면 된다. <br>크롬 드라이버 아래에 있는 WebDriverWait 객체는 자신이 선택한 요소가 화면에 보이거나, 클릭이 가능할 때 등 여러 조건을 충족할 때까지 대기한다. 때문에 Thread.sleep()과 같은 특정 시간을 기다리는 메소드보다 시간을 절약할 수 있다.
2. 웹드라이버를 불러왔다면 이제 링크를 타고 이동을 해야한다. 특정 링크 창을 열려면 driver.get("링크")를 사용하면 된다.
3. 






