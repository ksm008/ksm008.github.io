---
layout: post
title: 간단 요약 노트
date: 2025-09-05 16:08:41 +0900
categories:
  - 개발
  - React + Vite
published: true
math: true
tags:
  - 리액트
  - 빗
  - React
  - Vite
---
# Vite(빗) + React(JSX) 빠른 시작 가이드

> 스프링 백엔드(8080) + 리액트 프런트(5173)로 개발한다는 전제. 여기선 **프런트 쪽(Vite + React + JSX)** 을 처음부터 메인 페이지까지 바로 찍는 흐름으로 정리했어.

---

## 0) 개요

- **Vite(빗)**: 프런트엔드 개발 서버 + 빌드툴  
- **React**: 화면을 그리는 UI 라이브러리  
- **JSX**: React 컴포넌트 안에서 쓰는 HTML 닮은 문법  
- **개발 포트**: Vite 5173, 스프링 8080 (프록시로 연결)

---

## 1) 준비물

- **Node.js 20.19+ 또는 22.12+**  
  - 윈도우면 `nvm-windows`로 설치/전환 추천  
  - 인텔리제이: `Settings → Languages & Frameworks → Node.js`에서 Interpreter를 새 Node로 지정
- **Git, 터미널**(PowerShell/Terminal), 브라우저(Chrome 등)

---

## 2) 폴더 구조(권장)

```
unified-cart/
 ├─ server/           # Spring Boot
 ├─ client/           # Vite + React
 └─ docs/             # 문서(선택)
```

> 이미 `client/` 안에 Vite 앱이 있으면 그대로 써. 폴더가 한 단계 더 깊다면(`client/unified-cart-front`) 그 경로에서 명령을 실행하면 됨.

---

## 3) Vite로 React(JSX) 프로젝트 만들기

```bash
# client 폴더에서
npm create vite@latest . -- --template react
npm i
npm run dev
# http://localhost:5173 접속
```

Vite 기본 파일 핵심:
- `index.html` : 엔트리 HTML
- `src/main.jsx` : React 시작점
- `src/App.jsx` : 메인 컴포넌트

---

## 4) 개발 중 CORS 막기(프록시 설정)

스프링(8080) API를 프런트(5173)에서 편하게 쓰려면 Vite 프록시를 걸어.

`client/vite.config.js`
```js
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig({
  plugins: [react()],
  server: {
    port: 5173,
    proxy: { '/api': 'http://localhost:8080' } // /api → 스프링으로 전달
  }
})
```

프런트 코드에서는 그냥 `fetch('/api/...')`처럼 절대경로만 쓰면 됨.

---

## 5) 메인 페이지(검색 → 리스트) 최소 구현

`src/main.jsx`
```jsx
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App.jsx'

ReactDOM.createRoot(document.getElementById('root')).render(
  <React.StrictMode><App /></React.StrictMode>
)
```

`src/App.jsx`
```jsx
import { useEffect, useState } from 'react'

export default function App() {
  const [q, setQ] = useState('')
  const [items, setItems] = useState([])
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState(null)

  useEffect(() => {
    let ignore = false
    const load = async () => {
      setLoading(true); setError(null)
      try {
        const res = await fetch(`/api/products?q=${encodeURIComponent(q)}`)
        if (!res.ok) throw new Error(`HTTP ${res.status}`)
        const data = await res.json()
        if (!ignore) setItems(data)
      } catch (e) {
        if (!ignore) setError(e.message)
      } finally {
        if (!ignore) setLoading(false)
      }
    }
    load()
    return () => { ignore = true }
  }, [q])

  return (
    <div style={{ maxWidth: 840, margin: '40px auto', fontFamily: 'system-ui' }}>
      <h1>통합 장바구니 – 메인</h1>

      <div style={{ display:'flex', gap:8 }}>
        <input
          placeholder="상품 검색 (예: 생수)"
          value={q}
          onChange={(e)=>setQ(e.target.value)}
          style={{ flex:1, padding:12, border:'1px solid #ddd', borderRadius:8 }}
        />
        <button onClick={()=>setQ('생수')}>생수</button>
        <button onClick={()=>setQ('휴지')}>휴지</button>
      </div>

      {loading && <p style={{ marginTop: 12 }}>불러오는 중…</p>}
      {error && <p style={{ marginTop: 12, color: 'crimson' }}>에러: {error}</p>}

      <ul style={{ marginTop:16, padding:0, listStyle:'none' }}>
        {items.map(p => (
          <li key={p.id} style={{ padding:12, border:'1px solid #eee', borderRadius:10, marginBottom:10 }}>
            <div style={{ fontWeight:600 }}>{p.title}</div>
            {'price' in p && <div>{Number(p.price).toLocaleString()}원</div>}
            <button style={{ marginTop:8 }}>담기</button>
          </li>
        ))}
        {!loading && !error && items.length === 0 &&
          <li style={{ color:'#666', padding:12 }}>검색 결과가 없습니다.</li>
        }
      </ul>
    </div>
  )
}
```

> 백엔드(스프링)에서 `/api/products`만 더미로 맞춰주면 바로 뜬다.  
> 예시 응답:
> ```json
> [
>   { "id": 1, "title": "생수 2L x 6", "price": 6900 },
>   { "id": 2, "title": "휴지 30롤", "price": 13900 }
> ]
> ```

---

## 6) 라우팅으로 “페이지” 나누기(선택)

페이지처럼 쓰려면 **React Router**를 쓴다.

```bash
npm i react-router-dom
```

경로 설계 예: `/`(홈) → `/products?q=…`(리스트) → `/products/:id`(상세) → `/cart`  
레이아웃 `App.jsx`에 `<Outlet/>`, `src/pages/` 폴더에 `Home.jsx`, `Products.jsx` 등 분리.

---

## 7) 자바스크립트 핵심(초간단 치트시트)

- 변수: `const`(재할당 불가), `let`(재할당 가능)
- 비교는 `===`만 쓰자 (`==` 지양)
- 객체/배열은 불변 갱신: `{ ...obj }`, `[...arr, x]`
- 함수: `const fn = (x) => x + 1`
- 비동기: `const res = await fetch('/api'); const data = await res.json()`
- 배열 메서드: `map / filter / find / reduce` 자주 씀

---

## 8) JSX 규칙 5가지

1) 최상위는 **하나의 부모**로 감싸기  
2) JS 표현식은 `{}`  
3) `class` → `className`, `for` → `htmlFor`  
4) 스타일은 객체: `style={{ padding: 12 }}`  
5) 이벤트 핸들러 카멜케이스: `onClick={...}`

---

## 9) 빌드와 배포

- 개발: `npm run dev` (HMR)  
- 프로덕션 빌드: `npm run build` → `dist/` 생성  
- 로컬 미리보기: `npm run preview`  
- 실제 배포:  
  - **분리 배포**: Nginx로 `dist/` 서빙, `/api`는 스프링으로 프록시  
  - **합쳐 배포**: `dist/`를 스프링 `src/main/resources/static`에 넣어 스프링이 정적 파일 서빙

---

## 10) 자주 막히는 것들(빠른 해결)

- **Node 버전 오류**: Vite는 Node 20.19+ 또는 22.12+ 필요. `node -v` 확인, `nvm use 20.19.0`  
- **CORS 에러**: `vite.config.js`의 `server.proxy`로 `/api` → `http://localhost:8080`  
- **npm 실행 경로**: `package.json`이 있는 폴더에서 실행  
- **경고: key 필요**: 리스트 렌더링 시 `<li key={p.id}>`  
- **클래스 속성 에러**: `className` 사용  
- **상태 직접 변경 금지**: `setState(prev => [...prev, x])`처럼 새 배열/객체로
