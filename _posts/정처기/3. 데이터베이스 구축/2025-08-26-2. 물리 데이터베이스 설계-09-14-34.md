---
layout: post
title: 2. 물리 데이터베이스 설계
date:  2025-08-26 09:14:34 +0900 
categories:
published: true
tags:
---
## 070. 트랜잭션 분석
### 1. 트랜잭션 정의
디비 상태를 변화시키는 하나의 논리적 기능을 수행하는 단위, 또는 한꺼번에 수행되어야 할 연산들.
- 작업의 논리적인 단위.
- 상태 변환 과정의 작업 단위.

### 2. 트랜잭션의 상태
- **활동(Active):** 실행중
- **실패(Failed):** 실행 중 오류로 중단
- **철회(Aborted):** 비정상 종료로 롤백
- **부분 완료(Partially Committed):** 성공 후 Commit 직전
- **완료(Committed):** Commit 후

### 3. 특성
무결성 보장을 위해 트랜잭션이 가져야할 특성들
- **원자성(Atomicity):** 연산은 모두 반영되거나, 전혀 반영되지 않도록 롤백해야한다. 오류 발생시 취소 후 롤백.
- **일관성(Consistency):** 트랜잭션이 성공하면 일관성 있는 데이터베이스 상태로 변환
- **독립성(Isolation):** 둘 이상의 트랜잭션이 병행 실행될 경우 한 놈이 다른 놈에게 끼어들기 불가능.
- **지속성(Durability):** 성공적으로 완료된 트랜잭션 결과는 시스템이 고장나더라도 영구 반영되어야 함

### 4. CRUD 분석
CRUD는 Create, Read, Update, Delete의 앞자를 따서 만들어진 단어. 연산들에 대해 CRUD 매트릭스를 작성하여 분석한다.
- 트랜잭션을 분석하여 물리 데이터베이스 설계 시 구조 최적화 목적
- 테이블에 저장되는 데이터 양 유추 가능
- 디스크 구성 시 유용한 자료로 사용 가능
- 연결 지연, 타임아웃 오류 방지 가능

## 071. 인덱스 설계
### 1. 개요
데이터 레코드를 빠르게 접근하기 위한 `<키 값, 포인터>`로 구성되는 데이터 구조.
- 데이터가 저장된 물리적 구조와 밀접관 관계가 있음
- 물리적 구조에 접근하는 방법을 제공
- 파일의 레코드에 대한 액세스를 빠르게 수행 가능
- 삽입과 삭제가 수시로 일어날 경우 인덱스 개수는 최소가 효율적
- DDL을 사용하여 변경 가능
- 대부분 디비에서 테이블 삭제하면 인덱스도 같이 삭제됨
- 인덱스가 없으면 찾기 위한 모든 데이터 페이지를 확인하는 **TABLE SCAN**이 발생
- 기본 키를 위한 인덱스는 **기본 인덱스**, 나머지는 **보조 인덱스**. 대부분 DBMS가 기본 인덱스를 자동 생성함
- 레코드의 물리적 순서와 인덱스의 엔트리 순서가 일치하도록 구성된 인덱스는 **클러스터드 인덱스.**
- 트리 기반, 비트맵, 함수 기반, 비트맵 조인, 도메인 인덱스로 구분됨

### 2. 트리 기반 인덱스
인덱스를 저장하는 블록들이 트리 구조를 이루고 이음. 주로 B+ 트리 인덱스를 주로 활용함.

## 072. 뷰 설계
### 1. 뷰의 개요
허용된 자료만을 제한적으로 보여주는 가상 테이블. 
- 물리적으로 존재하지 않지만 사용자에게는 있는 것으로 간주됨
- 데이터 보정, 처리 과정 시험 등 임시 작업을 위함
- 조인문의 사용 최소화로 사용상의 편의성 최대화

### 2. 특징
- 기본 테이블과 유사하며 같은 구조. 
- 물리적 구현 없음
- 데이터의 논리적 독립성 제공 가능
- 필요한 데이터를 뷰로만 정의하여 처리 가능. 관리가 용이하고 명령문이 간단해짐
- 뷰를 통해 나타나지 않는 데이터를 안전하게 보호 가능
- 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있음
- 뷰가 정의된 테이블이 삭제되면 뷰도 자동 삭제
- 정의할때는 CREATE, 삭제할때는 DROP.

### 3. 장/단점

| 장점                                                                                   | 단점                                                   |
| ------------------------------------------------------------------------------------ | ---------------------------------------------------- |
| 논리적 독립성 제공<br>동일 데이터에 대해 상이한 응용이나 요구 지원<br>사용자의 데이터 관리를 간단하게<br>접근 제어를 통한 자동 보안이 제공됨 | 독립적인 인덱스 못가짐<br>뷰의 정의 변경 불가<br>삽입, 삭제, 갱신 연산에 제약이 따름 |

## 073. 파티션 설계
### 1. 개요
대용량의 테이블이나 인덱스를 작은 논리적 단위인 파티션으로 나누는 것.

### 3. 종류
- **범위 분할**
	- 지정한 열의 값을 기준으로 범위를 지정하여 분할 
	- ex) 일별, 월별, 분기별...
- **해시 분할**
	- 해시 함수를 적용한 결과 값에 따라 데이터 분할
	- 범위 분할의 단점을 보완, 데이터를 고르게 분산할 때 유용
	- 특정 데이터가 어디있는지 판단 불가
	- 고객번호나 주민번호 같이 데이터가 고른 컬럼에 좋음
- **조합 분할**
	- 범위 분할 후 해시 분할
- **목록 분할**
	- 지정한 열 값에 대한 목록을 만들어 분할
- **라운드 로빈 분할**
	- 레코드를 균일하게 분배
	- 기본키 필요 X

## 074. 분산 데이터베이스 설계
### 1. 정의
논리적으로는 하나지만 몰리적으로는 네트워크를 통해 여러 컴퓨터 사이트에 분산된 데이터베이스. 
- 