---
layout: post
title: 2. 물리 데이터베이스 설계
date: 2025-08-26 09:14:34 +0900
categories:
  - 정처기
  - 3. 데이터베이스 구축
published: true
tags:
  - 정처기
  - 정보처리기사
---
## 070. 트랜잭션 분석
### 1. 트랜잭션 정의
디비 상태를 변화시키는 하나의 논리적 기능을 수행하는 단위, 또는 한꺼번에 수행되어야 할 연산들.
- 작업의 논리적인 단위.
- 상태 변환 과정의 작업 단위.

### 2. 트랜잭션의 상태
- **활동(Active):** 실행중
- **실패(Failed):** 실행 중 오류로 중단
- **철회(Aborted):** 비정상 종료로 롤백
- **부분 완료(Partially Committed):** 성공 후 Commit 직전
- **완료(Committed):** Commit 후

### 3. 특성
무결성 보장을 위해 트랜잭션이 가져야할 특성들
- **원자성(Atomicity):** 연산은 모두 반영되거나, 전혀 반영되지 않도록 롤백해야한다. 오류 발생시 취소 후 롤백.
- **일관성(Consistency):** 트랜잭션이 성공하면 일관성 있는 데이터베이스 상태로 변환
- **독립성(Isolation):** 둘 이상의 트랜잭션이 병행 실행될 경우 한 놈이 다른 놈에게 끼어들기 불가능.
- **지속성(Durability):** 성공적으로 완료된 트랜잭션 결과는 시스템이 고장나더라도 영구 반영되어야 함

### 4. CRUD 분석
CRUD는 Create, Read, Update, Delete의 앞자를 따서 만들어진 단어. 연산들에 대해 CRUD 매트릭스를 작성하여 분석한다.
- 트랜잭션을 분석하여 물리 데이터베이스 설계 시 구조 최적화 목적
- 테이블에 저장되는 데이터 양 유추 가능
- 디스크 구성 시 유용한 자료로 사용 가능
- 연결 지연, 타임아웃 오류 방지 가능

## 071. 인덱스 설계
### 1. 개요
데이터 레코드를 빠르게 접근하기 위한 `<키 값, 포인터>`로 구성되는 데이터 구조.
- 데이터가 저장된 물리적 구조와 밀접관 관계가 있음
- 물리적 구조에 접근하는 방법을 제공
- 파일의 레코드에 대한 액세스를 빠르게 수행 가능
- 삽입과 삭제가 수시로 일어날 경우 인덱스 개수는 최소가 효율적
- DDL을 사용하여 변경 가능
- 대부분 디비에서 테이블 삭제하면 인덱스도 같이 삭제됨
- 인덱스가 없으면 찾기 위한 모든 데이터 페이지를 확인하는 **TABLE SCAN**이 발생
- 기본 키를 위한 인덱스는 **기본 인덱스**, 나머지는 **보조 인덱스**. 대부분 DBMS가 기본 인덱스를 자동 생성함
- 레코드의 물리적 순서와 인덱스의 엔트리 순서가 일치하도록 구성된 인덱스는 **클러스터드 인덱스.**
- 트리 기반, 비트맵, 함수 기반, 비트맵 조인, 도메인 인덱스로 구분됨

### 2. 트리 기반 인덱스
인덱스를 저장하는 블록들이 트리 구조를 이루고 이음. 주로 B+ 트리 인덱스를 주로 활용함.

## 072. 뷰 설계
### 1. 뷰의 개요
허용된 자료만을 제한적으로 보여주는 가상 테이블. 
- 물리적으로 존재하지 않지만 사용자에게는 있는 것으로 간주됨
- 데이터 보정, 처리 과정 시험 등 임시 작업을 위함
- 조인문의 사용 최소화로 사용상의 편의성 최대화

### 2. 특징
- 기본 테이블과 유사하며 같은 구조. 
- 물리적 구현 없음
- 데이터의 논리적 독립성 제공 가능
- 필요한 데이터를 뷰로만 정의하여 처리 가능. 관리가 용이하고 명령문이 간단해짐
- 뷰를 통해 나타나지 않는 데이터를 안전하게 보호 가능
- 정의된 뷰는 다른 뷰의 정의에 기초가 될 수 있음
- 뷰가 정의된 테이블이 삭제되면 뷰도 자동 삭제
- 정의할때는 CREATE, 삭제할때는 DROP.

### 3. 장/단점

| 장점                                                                                   | 단점                                                   |
| ------------------------------------------------------------------------------------ | ---------------------------------------------------- |
| 논리적 독립성 제공<br>동일 데이터에 대해 상이한 응용이나 요구 지원<br>사용자의 데이터 관리를 간단하게<br>접근 제어를 통한 자동 보안이 제공됨 | 독립적인 인덱스 못가짐<br>뷰의 정의 변경 불가<br>삽입, 삭제, 갱신 연산에 제약이 따름 |

## 073. 파티션 설계
### 1. 개요
대용량의 테이블이나 인덱스를 작은 논리적 단위인 파티션으로 나누는 것.

### 3. 종류
- **범위 분할**
	- 지정한 열의 값을 기준으로 범위를 지정하여 분할 
	- ex) 일별, 월별, 분기별...
- **해시 분할**
	- 해시 함수를 적용한 결과 값에 따라 데이터 분할
	- 범위 분할의 단점을 보완, 데이터를 고르게 분산할 때 유용
	- 특정 데이터가 어디있는지 판단 불가
	- 고객번호나 주민번호 같이 데이터가 고른 컬럼에 좋음
- **조합 분할**
	- 범위 분할 후 해시 분할
- **목록 분할**
	- 지정한 열 값에 대한 목록을 만들어 분할
- **라운드 로빈 분할**
	- 레코드를 균일하게 분배
	- 기본키 필요 X

## 074. 분산 데이터베이스 설계
### 1. 정의
논리적으로는 하나지만 몰리적으로는 네트워크를 통해 여러 컴퓨터 사이트에 분산된 데이터베이스. 
- 데이터 처리나 이용이 많은 지역에 위치시켜 해당 지역에서 처리가 가능하도록 함

### 2. 구성 요소
- **분산 처리기:** 자체 처리 능력 있음, 지리적으로 분산된 컴퓨터 시스템
- **분산 데이터베이스:** 해당 지역의 특성에 맞게 디비 구성
- **통신 네트워크:** 분산 처리기들을 연결하여 하나의 시스템처럼 만듬

### 4. 분산 데이터베이스의 목표

- **위치 투명성 (Location Transparency):** 디비의 실제 위치를 몰라도 논리적인 명칭으로만 접근 가능
- **중복 투명성 (Replication Transparency):** 동일 데이터가 여러 곳에 존재하더라도 마치 하나의 데이터처럼 사용
- **병행 투명성 (Concurrency Transparency):** 다수의 트랜잭션이 동시에 실행되더라도 결과는 영항 X
- **장애 투명성 (Failure Transparency):** 장애에도 불구하고 트랜잭션 정확하게 처리

### 5. 장단점
- **장점**
	- 지역 자치성이 높음
	- 자료 공유성 향상
	- 분산 제어 가능
	- 시스템 성능 향상
	- 중앙 컴퓨터의 장애가 전체 시스템에 영향 X
	- 효용성, 융통성 높음
	- 신뢰성, 가용성 높음
	- 점진적 시스템 용량 확장 용이
- **단점**
	- DBMS가 수행할 기능 복잡
	- 디비 설계 어려움
	- 처리 비용, 소프트웨어 개발 비용 증가
	- 잠재적 오류 증가

## 075. 데이터베이스 보안 / 암호화

### 1. 데이터베이스 보안의 개요
권한이 없는 사용자가 액세스하는 것을 금지하기 위한 기술
- 테이블부터 특정 테이블의 행과 열 위치의 특정 데이터까지 그 범위는 다양하다.
- 디비 사용자들은 일반적으로 다른 객체에 대하여 다른 접근 권리나 권한을 얻는다.
### 2. 암호화
암호화(Encryption): 평문을 암호문으로
복호화(Decryption): 암호문을 평문으로
- 암호화 기법에는 개인 키와 공개 키 방식이 있다.

개인 키는 키가 하나, 공개 키는 2개. 개인 키는 AES, DES 같은거고 공개 키는 RSA 같은거. 암호학 배웠으니 모르면 바보지

## 076. 데이터베이스 보안 - 접근통제
### 1. 접근통제
데이터가 저장된 객체와 이를 사용하려는 주체 사이의 정보 흐름을 제한하는 것. 다음과 같은 통제로 불법적인 접근 및 파괴를 예방.
- 비인가된 사용자의 접근 감시
- 접근 요구자의 사용자 식별
- 접근 요구의 정당성 확인 및 기록
- 보안 정책에 근거한 접근의 승인 및 거부
접근통제 기술에는 임의 접근통제(DAC), 강제 접근통제(MAC), 역할기반 접근통제(RBAC)가 있다.

- **임의 접근통제(DAC, Discretionary Access Control)**
	- 접근하려는 사용자의 신원에 따라 권한을 부여
	- 데이터 소유자가 권한을 지정
	- 객체를 생성한 사람이 모든 권한을 가짐
	- SQL에서 GRANT, REVOKE가 해당됨
- **강제 접근통제(Mandatory Access Control)**
	- 주체와 객체의 등급을 비교하여 접근 권한을 부여
	- 디비 객체별, 사용자별로 보안 등급 부여 가능
	- 시스템이 권한을 지정
- **역할기반 접근통제(Role Base Access Control)**
	- 사용자의 역할에 따라 권한을 부여
	- 중앙관리자가 권한을 지정
	- 임의와 강제의 단점을 보완, 다중 프로그래밍 환경에 최적화됨

접근통제의 3요소는 정책, 매커니즘, 보안모델이다.

>**강제 접근통제(MAC)의 보안 모델**
>- 벨 라파듈라 모델 (Bell-LaPadula Model)
>	- 군대의 보안 레벨처럼 정보의 기밀성에 따라 상하 관계가 구분된 정보를 보호하기 위해 사용.
>- 그 외에는 비바 무결성 모델 (벨 라파듈라를 보완한 수학적 모델이고, 무결성을 최초로 보장하는 모델)
>- 클락-윌슨 무결성 모델 (프로그램에 의해 접근이 가능한 보안 모델)
>- 만리장성 모델(서로 이해 충돌 관계에 있는 객체 간의 정보 접근을 통제)이 있다.
{: .prompt-info }

## 077. 데이터베이스 백업
### 1. 데이터베이스 백업
백업을 모르는 사람은 없겠지?

## 078. 스토리지
### 1. 스토리지의 개요
단일 디스크에 저장 못하는 대용량 데이터를 서버와 저장장치를 연결하는 기술.
- DAS, NAS, SAN이 있다.

### 2. DAS(Direct Attached Storage)
 서버와 저장장치를 전용 케이블로 직접 연결하는 방식. 컴퓨터에 외장 하드 꽂는게 이런거
 - 서버에서 저장장치 관리
 - 직접 연결하기 때문에 속도가 빠르고 쉬움
 - 비용이 저렴
 - 다른 서버에 접근, 파일 공유 불가
 - 확장성과 유연성 떨어짐
 - 저장이 적고 공유가 필요 없는 환경

### 3. NAS(Network Attached Storage)
서버와 저장장치를 네트워크를 통해 연결하는 방식
- 별도의 파일 기능이 있는 NAS Storage가 내장된 저장장치를 직접 관리.
- 이더넷 스위치를 통해 다른 서버에서도 스토리지 접근이 가능. 장소에 구애받지 않고 저장장치 접근 가능.
- DAS에 비해 확장성, 유연성 우수
- 사용자가 많으면 성능저하
### 4. SAN(Storage Area Network) 
DAS의 빠른 처리와 NAS의 파일 공유 장점을 혼합
- 광 채널(FC) 스위치를 이용하여 네트워크를 구성한다.
- 광 케이블 = 속도가 빠르다
- 대충 돈이 많이 들지만 그만큼 좋다.